<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Urvi ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  color:#fff;
  overflow:hidden;
  text-align:center;
  background:linear-gradient(-45deg,#ff9a9e,#fbc2eb,#fad0c4,#a18cd1);
  background-size:400% 400%;
  animation:bg 18s ease infinite;
  font-family:sans-serif;
}

@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.section{
  width:100vw;
  height:100vh;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  padding:20px;
  position:relative;
}
.section.active{display:flex}

/* Floating hearts */
.heart{
  position:fixed;
  bottom:-10px;
  font-size:22px;
  background:linear-gradient(135deg,#ff9a9e,#fbc2eb);
  -webkit-background-clip:text;
  color:transparent;
  animation:float 5s linear infinite;
}
@keyframes float{
  to{transform:translateY(-110vh);opacity:0}
}

/* Tap & Hold */
#hold{
  width:190px;
  height:190px;
  border-radius:50%;
  border:4px solid #fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
  background:rgba(255,255,255,.25);
  position:relative;
}
#fill{
  position:absolute;
  inset:0;
  border-radius:50%;
  background:rgba(255,255,255,.6);
  clip-path:circle(0%);
}

/* Responsive BIG boxes */
.box{
  width:min(42vw,220px);
  height:min(42vw,220px);
  border-radius:36px;
  font-size:min(14vw,72px);
  display:flex;
  align-items:center;
  justify-content:center;
  position:absolute;
  box-shadow:0 30px 80px rgba(0,0,0,.6);
  touch-action:none;
  pointer-events:auto;
}

.box.moved{
  pointer-events:none;
}

.box1{background:linear-gradient(135deg,#ff9a9e,#fad0c4)}
.box2{background:linear-gradient(135deg,#fbc2eb,#a6c1ee)}
.box3{background:linear-gradient(135deg,#ffecd2,#fcb69f)}
.box4{background:linear-gradient(135deg,#ffdde1,#ee9ca7)}

#boxArea{
  position:absolute;
  inset:0;
  z-index:5;
}

#continueBtn{
  position:relative;
  z-index:1;
  padding:18px 38px;
  font-size:18px;
  border:none;
  border-radius:20px;
  background:#fff;
  color:#000;
}

/* Photos */
img.photo{
  max-width:85%;
  max-height:85%;
  border-radius:24px;
  box-shadow:0 30px 70px rgba(0,0,0,.65);
}

/* Ticket */
#ticket{
  padding:26px;
  width:260px;
  background:linear-gradient(135deg,#ffd700,#fff1a8);
  color:#000;
  border-radius:22px;
  font-weight:700;
  cursor:pointer;
}

/* Envelope */
#envelope{
  width:230px;
  height:155px;
  background:#f4c2d7;
  position:relative;
  border-radius:16px;
  cursor:pointer;
  box-shadow:0 25px 60px rgba(0,0,0,.45);
}
.env-top{
  position:absolute;
  top:0;
  width:100%;
  height:78px;
  background:#f9a8c4;
  clip-path:polygon(0 0,100% 0,50% 100%);
  transform-origin:top;
  transition:transform .9s ease;
}
.env-body{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:44px;
}
.open .env-top{transform:rotateX(180deg)}

/* Letter */
#letterPage{
  background:#fff7ef;
  color:#2d2d2d;
  width:92%;
  max-height:80vh;
  padding:32px;
  border-radius:26px;
  font-family:'Playfair Display',serif;
  font-size:18px;
  line-height:1.7;
  overflow-y:auto;
  text-align:left;
  box-shadow:0 35px 80px rgba(0,0,0,.5);
}

/* Final */
.finalText{
  font-family:'Great Vibes',cursive;
  font-size:58px;
}
.subFinal{
  font-size:22px;
  margin-top:10px;
}
</style>
</head>

<body>

<audio id="music" preload="auto" playsinline>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<!-- Tap & Hold -->
<div class="section active">
  <div id="hold"
    onmousedown="startHold()" ontouchstart="startHold()"
    onmouseup="endHold()" ontouchend="endHold()">
    Tap & Hold ‚ù§Ô∏è
    <div id="fill"></div>
  </div>
</div>

<!-- Boxes -->
<div class="section">
  <div id="boxArea"></div>
  <button id="continueBtn" onclick="next()">Continue ‚Üí</button>
</div>

<!-- Photos -->
<div class="section"><img src="img1.jpg" class="photo"></div>
<div class="section"><img src="img2.jpg" class="photo"></div>
<div class="section"><img src="img3.jpg" class="photo"></div>
<div class="section"><img src="img4.jpg" class="photo"></div>
<div class="section"><img src="img5.jpg" class="photo"></div>

<!-- Ticket -->
<div class="section">
  <div id="ticket" onclick="next()">üé´ GOLDEN TICKET<br><br>Tap to open</div>
</div>

<!-- Envelope -->
<div class="section">
  <div id="envelope" onclick="openLetter()">
    <div class="env-top"></div>
    <div class="env-body">üíå</div>
  </div>
  <p style="margin-top:12px">Tap to open</p>
</div>

<!-- Letter -->
<div class="section">
  <div id="letterPage"></div><br>
  <button onclick="next()">Continue ‚Üí</button>
</div>

<!-- Final -->
<div class="section">
  <div class="finalText">Happy New Year ‚ú®</div>
  <div class="subFinal">I love you Urvi ‚ù§Ô∏è</div>
</div>

<script>
const sections=document.querySelectorAll('.section')
let i=0
function next(){
  sections[i].classList.remove('active')
  i++
  sections[i].classList.add('active')
  if(i>=2 && i<=6) setTimeout(next,3200)
}

/* Tap & Hold */
let prog=0,holdInt
function startHold(){
  holdInt=setInterval(()=>{
    prog+=3
    fill.style.clipPath=`circle(${prog}%)`
    if(prog>=70){
      clearInterval(holdInt)
      music.play().catch(()=>{})
      next()
      initBoxes()
    }
  },100)
}
function endHold(){clearInterval(holdInt)}

/* Boxes ‚Äì bulletproof positioning */
function initBoxes(){
  const area = document.getElementById('boxArea')
  area.innerHTML = ''

  const section = area.closest('.section')
  const btn = document.getElementById('continueBtn')

  const sRect = section.getBoundingClientRect()
  const bRect = btn.getBoundingClientRect()

  const centerX = bRect.left - sRect.left + bRect.width/2
  const centerY = bRect.top  - sRect.top  + bRect.height/2

  const emojis = ['üíã','‚ù§Ô∏è','üòç','üíï']
  const offsets = [
    {x:-90,y:-90},{x:90,y:-90},
    {x:-90,y:90},{x:90,y:90}
  ]

  emojis.forEach((e,i)=>{
    const box = document.createElement('div')
    box.className = `box box${i+1}`
    box.textContent = e

    box.style.left = (centerX + offsets[i].x) + 'px'
    box.style.top  = (centerY + offsets[i].y) + 'px'

    area.appendChild(box)

    let dragging = false

    box.onpointerdown = ev => {
      dragging = true
      box.setPointerCapture(ev.pointerId)
    }

    box.onpointermove = ev => {
      if(!dragging) return
      box.style.left = (ev.clientX - sRect.left - box.offsetWidth/2) + 'px'
      box.style.top  = (ev.clientY - sRect.top  - box.offsetHeight/2) + 'px'
    }

    box.onpointerup = () => {
      dragging = false
      box.classList.add('moved')
    }
  })
}

/* Letter open */
function openLetter(){
  document.getElementById('envelope').classList.add('open')
  setTimeout(()=>{
    next()
    letterPage.textContent=TEXT
  },900)
}

/* Letter text */
const TEXT=`Every little moment...
Every smile...
Led me here,
to ask you something special.

Another year with you means another year of smiles I didn‚Äôt know I needed,
laughs that come out of nowhere,
and love that feels safe and exciting at the same time.

You make my days brighter just by being in them.
I‚Äôm so thankful for you, for us,
and for everything we‚Äôve built together.

I can‚Äôt wait to keep growing,
dreaming,
and making memories with you this next year.

You mean more to me than I could ever put into words. üíï‚ú®`

/* Hearts */
setInterval(()=>{
  const h=document.createElement('div')
  h.className='heart'
  h.textContent='‚ù§Ô∏è'
  h.style.left=Math.random()*100+'vw'
  document.body.appendChild(h)
  setTimeout(()=>h.remove(),5000)
},420)
</script>

</body>
</html>
